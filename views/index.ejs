<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<style>
  /********container************/
  .container-fluid,
  .container-sm,
  .container-md,
  .container-lg,
  .container-xl {
    width: 100%;
    margin-right: auto;
    margin-left: auto;
    background-color: yellowgreen;
  }

  @media (min-width: 576px) {

    .container,
    .container-sm {
      max-width: 540px;
    }
  }

  @media (min-width: 768px) {

    .container,
    .container-sm,
    .container-md {
      max-width: 720px;
    }
  }

  @media (min-width: 992px) {

    .container,
    .container-sm,
    .container-md,
    .container-lg {
      max-width: 960px;
    }
  }


  /*********Btn****************/

  .btn {
    display: inline-block;
    font-weight: 400;
    color: #212529;
    text-align: center;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    background-color: transparent;
    border: 1px solid transparent;
    padding: 0.375rem 0.75rem;
    font-size: 1rem;
    line-height: 1.5;
    border-radius: 0.25rem;
    transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out;
  }

  @media (prefers-reduced-motion: reduce) {
    .btn {
      transition: none;
    }
  }

  .btn:hover {
    color: #212529;
    text-decoration: none;
  }

  .btn:focus,
  .btn.focus {
    outline: 0;
    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
  }

  .btn.disabled,
  .btn:disabled {
    opacity: 0.65;
  }

  .btn:not(:disabled):not(.disabled) {
    cursor: pointer;
  }

  a.btn.disabled,
  fieldset:disabled a.btn {
    pointer-events: none;
  }

  .btn-primary {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
  }

  .btn-primary:hover {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
  }

  .btn-primary:focus,
  .btn-primary.focus {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
    box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.5);
  }

  .btn-primary.disabled,
  .btn-primary:disabled {
    color: #fff;
    background-color: #007bff;
    border-color: #007bff;
  }

  .btn-primary:not(:disabled):not(.disabled):active,
  .btn-primary:not(:disabled):not(.disabled).active,
  .show>.btn-primary.dropdown-toggle {
    color: #fff;
    background-color: #0062cc;
    border-color: #005cbf;
  }

  .btn-primary:not(:disabled):not(.disabled):active:focus,
  .btn-primary:not(:disabled):not(.disabled).active:focus,
  .show>.btn-primary.dropdown-toggle:focus {
    box-shadow: 0 0 0 0.2rem rgba(38, 143, 255, 0.5);
  }

  .btn-block {
    display: block;
    width: 100%;
  }

  .btn-block+.btn-block {
    margin-top: 0.5rem;
  }

  input[type="submit"].btn-block,
  input[type="reset"].btn-block,
  input[type="button"].btn-block {
    width: 100%;
  }

  .btn-lg,
  .btn-group-lg>.btn {
    padding: 0.5rem 1rem;
    font-size: 1.25rem;
    line-height: 1.5;
    border-radius: 0.3rem;
  }

  .btn-lg+.dropdown-toggle-split,
  .btn-group-lg>.btn+.dropdown-toggle-split {
    padding-right: 0.75rem;
    padding-left: 0.75rem;
  }


  /**********The Modal (background) ************/
  .modal {
    display: none;
    /* Hidden by default */
    position: fixed;
    /* Stay in place */
    z-index: 1;
    /* Sit on top */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.4);
    /* Black w/ opacity */
  }

  /* Modal Content/Box */
  .modal-content {
    background-color: #fefefe;
    margin: 15% auto;
    /* 15% from the top and centered */
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    /* Could be more or less, depending on screen size */
  }

  /* The Close Button */
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
  }

  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }

  /**progress bar**/
  .progress {
    display: -ms-flexbox;
    display: flex;
    height: 1rem;
    overflow: hidden;
    line-height: 0;
    font-size: 0.75rem;
    background-color: #e9ecef;
    border-radius: 0.25rem;
  }

  .progress-bar {
    display: -ms-flexbox;
    display: flex;
    -ms-flex-direction: column;
    flex-direction: column;
    -ms-flex-pack: center;
    justify-content: center;
    overflow: hidden;
    color: #fff;
    text-align: center;
    white-space: nowrap;
    background-color: #007bff;
    transition: width 0.6s ease;
  }

  @media (prefers-reduced-motion: reduce) {
    .progress-bar {
      transition: none;
    }
  }

  /* for responsive images */
  img {
    vertical-align: middle;
    border-style: none;
  }

  .img-fluid {
    width: 100%;
    height: auto;
  }

  /*for left-right div*/
  .lr-wrapper {
    padding-top: 1%;
    padding-bottom: 1%;
    width: 100%;
    height: auto;
    position: relative;
    overflow: hidden;
  }

  .ml-15{
    margin-left: 18%;
  }

  .mr-18{
    margin-right: 18%;
  }

  /*radio*/
  .rdo{
    width:15px;
    height:15px;
    border:1px;
  }
</style>

<body>
  <!-- Page Content -->
  <div class="container-sm">
    <div>
      <img class="img-fluid"
        src="https://hips.hearstapps.com/hmg-prod.s3.amazonaws.com/images/homemade-bread-horizontal-1547759080.jpg"
        alt="fluid image">
    </div>


    <form action="/" method="get">
      <div>
        <input type="radio" id="male" name="chosen" value="0">
        <label for="male">Male</label><br>
        <input type="radio" id="female" name="chosen" value="1">
        <label for="female">Female</label><br>
      </div>

      <%
      var c0=parseInt(results[0].cnt)-1;
      var c1=parseInt(results[1].cnt)-1;

      var c0Propotion= (c0/(c0+c1))*100;
      var c1Propotion= (c1/(c0+c1))*100;
      %>
      <div>
        <div class="progress" style="height: 20px;">
          <div class="progress-bar" role="progressbar" style="width: <%=c0Propotion%>%;" aria-valuenow="25"
            aria-valuemin="0" aria-valuemax="100"></div>
        </div>
      </div>
      <div>
        <div><%=c0Propotion.toFixed(1)%> %</div>
        <div><%=c1Propotion.toFixed(1)%> %</div>
      </div>

      <!-- 모달 버튼 및 모달창 -->
      <div>
        <!-- Trigger/Open The Modal -->
        <button type="button" id="voteBtn" class="btn btn-primary btn-block btn-lg">투표하기</button>

        <!-- The Modal -->
        <div id="myModal" class="modal">
          <!-- Modal content -->
          <div class="modal-content">
            <span class="close">&times;</span>
            <p>투표하기버튼을 클릭했습니다.</p>
            <button type="submit" id="modalConfirmBtn" class="btn btn-primary">투표완료!</button>
          </div>
        </div>

      </div>
    </form>

  </div>

  <script>

    function frmchk() {
      var chk = document.getElementsByName("chosen");
      var checked_items = 0;

      for (i = 0; i < chk.length; i++) {
        if (chk[i].checked) checked_items++;
      }

      if (checked_items == 0) {
        return false;
      }
      return true;
    }

    // Get the modal
    var modal = document.getElementById("myModal");
    // Get the button that opens the modal
    var voteBtn = document.getElementById("voteBtn");
    var modalConfirmBtn = document.getElementById("modalConfirmBtn");
    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // When the user clicks on the button, open the modal
    voteBtn.onclick = function () {
      if (frmchk()) {
        modal.style.display = "block";
      } else {
        alert("적어도 하나의 항목을 선택하셔야 합니다.");
      }
    }

    //When clicked confirm button in modal
    modalConfirmBtn.onclick = function () {
      modal.style.display = "none";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function () {
      modal.style.display = "none";
    }

  </script>

</body>

</html>